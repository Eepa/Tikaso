CREATE TABLE LAUSEET
====================

//Taulu jarjestelman kayttajasta. Kertoo kayttajan nimen ja
henkilotunnuksen.

CREATE TABLE kayttaja (
    hetu            int not null,  -- kayttajan henkilotunnus
    etunimi         varchar(30),   -- kayttajan etunimi
    sukunimi        varchar(30),   -- kayttajan sukunimi
    primary key (hetu)
);



//Jos kayttaja on luonut jarjestelmaan profiilin, sisaltaa 
taulu tiedot kayttajan kayttajaprofiilista.

CREATE TABLE kayttajaprofiili (
    hetu            int not null,  -- kayttajan henkilotunnus
    kayttajanimi    varchar(30),   -- kayttajan kayttajanimi
    salasana        varchar(30),   -- kayttajan salasana
    sahkoposti      varchar(50),   -- kayttajan sahkoposti
    primary key (hetu),
    foreign key (hetu) references kayttaja
);



//Kertoo, mita lajeja tietokantaan on tallennettu. Naista lajeista 
on mahdollista lisata jarjestelmaan uusi harjoituskerta.

CREATE TABLE laji (
    lajitunnus      int not null,  -- lajin tunnus
    lajinimi        varchar(30),   -- lajin nimi
    lajikuvaus      varchar(1000), -- lajin sanallinen kuvaus
    primary key (lajitunnus),
);



//Kayttajien lajiprofiilit liittyen aina yhteen lajiin. 
Jokaisella kayttajalla voi olla useampi laji 
(tai ei yhtaan lajia), jota han harrastaa. Nama lajit on merkitty 
lajiprofiiliin kukin omalle rivilleen.

CREATE TABLE lajiprofiili (
    hetu               int not null,  -- kayttajan henkilotunnus
    lajitunnus         int not null,  -- lajin tunnus
    tavoitekuvaus      varchar(2000), -- tavoitteen sanallinen kuvaus
    tavoiteharjmaara   int,           -- kayttajan tavoiteharjoitusmaara
    primary key (hetu, lajitunnus),
    foreign key (hetu) references kayttaja
    foreign key (lajitunnus) references lajit
);



//Kertoo harjoituskerrat, jotka kayttajalla on. Kayttaja voi lisata 
harjoituskerran vain sellaiseen lajiin, joka sisaltyy kayttajan 
lajiprofiileihin. Harjoituskerrasta merkitaan vahintaan paivays ja 
alkamisaika. Lisaksi voidaan merkita harjoituksen kesto, 
vaikeusaste ja kirjoittaa sanallinen kuvaus.

CREATE TABLE harjoituskerta (
    hetu               int not null,  -- kayttajan henkilotunnus
    lajitunnus         int not null,  -- lajin tunnus
    harjpvm            date not null, -- harjoituskerran paivays (vvvv-kk-pp)
    harjalku           time not null, -- harjoituskerran alkamisaika (HH:MM:SS)
    harjkesto          int,           -- harjoituksen kesto minuutteina
    vaikeusaste        int,           -- harjoituksen vaikeusaste numerona
    harjkuvaus         varchar(2000), -- harjoituksen sanallinen kuvaus
    primary key (hetu, lajitunnus, harjpvm, harjalku),
    foreign key (hetu, lajitunnus) references lajiprofiili
);



//Kertoo arvion, jonka joku kayttaja on tehnyt tietysta 
harjoituksesta. Kayttaja voi lisata arvion itselleen tai jollekin 
muulle kayttajalle. Arvioista merkitaan vahintaan harjoituskerta, 
johon arvio liittyy, arviopaivamaara ja arvioija. Lisaksi voidaan 
merkita yleisarvosana harjoituksesta, tyytyvaisyysarvosana, 
ja sanallinen arvio.

CREATE TABLE arvio (
    hetu               int not null,  -- kayttajan henkilotunnus
    lajitunnus         int not null,  -- lajin tunnus
    harjpvm            date not null, -- harjoituskerran paivays (vvvv-kk-pp)
    harjalku           time not null, -- harjoituskerran alkamisaika (HH:MM:SS)
    arviopvm           date not null, -- arvion paivays (vvvv-kk-pp)
    arvioijahetu       int not null,  -- arvioijan henkilotunnus
    yleisarvosana      int,           -- yleisarvosana harjoituksesta
    tyytyvaisyysarvo   int,           -- arvosana tyytyvaisyydesta harjoitukseen
    sanallinenarvio    varchar(2000), -- arvion sanallinen kuvaus
    primary key (hetu, lajitunnus, harjpvm, harjalku, arviopvm, arvioijahetu),
    foreign key (hetu, lajitunnus, harjpvm, harjalku) references harjoituskerta
    foreign key (arvioijahetu) references kayttaja
);
